x) Lue/katso/kuuntele ja tiivistä. (Tässä x-alakohdassa ei tarvitse tehdä testejä tietokoneella, vain lukeminen tai kuunteleminen ja tiivistelmä riittää. Tiivistämiseen riittää muutama ranskalainen viiva.)

  OWASP: OWASP Top 10: A01 Broken Access Control
  - Hyökkääjä/käyttäjä tekee jotain mihin hänellä ei pitäisi olla oikeus
  - Yksinkertaisimmillaan hyökkäys johtuu siitä, että tekijä ei ole rajannut oikeuksia tarpeeksi. Esim. Hyökkääjä voi kirjoittaa sivun URL:iin jotain joka vie kielletylle/salaiselle sivulle.
  Karvinen 2023: Find Hidden Web Directories - Fuzz URLs with ffuf
    - Fuff työkalulla voidaan löytää piilotettu tai salaisia sivuja testamalla tuhansia eri URL:lliä
    - Haluttuja sivuja voidaan löytää tarkastelemalla fuffin antamia tietoja kuten Status, Size,  Words,  Lines, ja Duration 
        
  PortSwigger: Access control vulnerabilities and privilege escalation
   - Pääsynhallinta ( Access control) asettaa rajat kenelle on pääsy mihin.
   - Jos pääsynhallinnassa on aukkoja (Broken access control), sitä voi hyväksikäyttää, nostaa käyttäjän oikeuksia (privilige escalation) ja  päästä käsiksi tietoihin mihin ei ole lupaa. 
        
 Karvinen 2006: Raportin kirjoittaminen
 - Täsmällinen raportointi: selkeät vaiheet, ympäristö, työkalut, lähteiden käyttö ja viittaus,
 - Ei saa sepittää (väittää tehneensä jotain mitä ei ole tehnyt), plagoida toisen tekstin kopioiminen tai käyttäminen ilman että selkeästi ilmoittaa asiasta tai täyttää luvatta muiden kuvia. Nämä kaikki on vilppiä ja ei sallittua!
        
   Vapaaehtoinen: PortSwigger 2020: What is SQL injection? - Web Security Academy (noin 10 min video)
   - SQL-injektio on hyökkäys missä sovellus ei osaa eroittaa tekstin ja koodin eroa
   - Siinä siis syötetään SQL-komento tekstikenttää ja se erheellisesti ajaa komennon, jonka se luulee olevansa vain tekstiä.
  
https://cdimage.debian.org/debian-cd/current/amd64/iso-dvd/         
a) Murtaudu 010-staff-only. Ks. Karvinen 2024: Hack'n Fix

Ensiksi asensin debian 13 bookwormin näiden ohjeiden mukaan: https://terokarvinen.com/2021/install-debian-on-virtualbox/

    sudo apt-get update
    sudo apt-get -y install wget unzip micro
    wget https://terokarvinen.com/hack-n-fix/teros-challenges.zip
    unzip teros-challenges.zip

Sen jälkeen

     cd challenges/010-staff-only/
    sudo apt-get install python3-flask
    sudo apt-get -y install python3-flask python3-flask-sqlalchemy
    python3 staff-only.py
Jonka jälkeen pääsin tänne


<img width="1073" height="142" alt="hfix1" src="https://github.com/user-attachments/assets/072da87d-6755-49c1-a4bc-2c7fd71f48d8" />

Tehtävän tavoite on saada admin salasana. Siinä tiedetään olevan "SUPERADMIN". Lisäksi kohde ystävällisesti tarjoaa kertauksen SQL-syntaksiin


    SELECT password FROM pins WHERE pin='0';

  Tämä hakee salasanat joiden arvo on nolla kohdasta pins

  Ensimmäinen idea joka tuli mieleen on muuttaa sitä, jotta ottaa salasanat jotka sisältää SUPERADMIN, koska sen tiedetään olevan siinä.


     SELECT password FROM pins WHERE pin='SUPERADMIN';





  <img width="1228" height="316" alt="Image" src="https://github.com/user-attachments/assets/04c5a014-ad35-4ca2-b535-9a1df864c0c7" />

  Se ei toiminut, koska sen pitää sisältää numeron. Tämä antaa lisää dataa.

  Muita tietoja on, että oma kuvitteellinen pin on 123 

  <img width="1257" height="355" alt="Image" src="https://github.com/user-attachments/assets/33952f59-1307-4545-9b84-8b96ba51a73d" />

Kokeilemalla varmistin, että se on siellä

Tiedän nyt, että oma pin (somedude) ja admin (SUPERADMIN) salasanat ovat tietokannassa. 

Seuraavaksi päätin kokeilla hakea jompaa kumpaa salasanaa käyttämällä SQL komentoja 

<img width="1245" height="333" alt="Image" src="https://github.com/user-attachments/assets/ce5c7f87-7713-43d9-8077-9638bd27e60c" />

Jälleen herjaa vain numeroita.

Mitä jos numero rajoituksen poistaisi


<img width="390" height="89" alt="number" src="https://github.com/user-attachments/assets/cda1a523-ca52-4fc3-a904-917284429e77" />

Vaihdoin 

    <input type = "number">

  


    



    






b) Korjaa 010-staff-only haavoittuvuus lähdekoodista. Osoita testillä, että ratkaisusi toimii.
c) Ratkaise dirfuzt-1 artikkelista Karvinen 2023: Find Hidden Web Directories - Fuzz URLs with ffuf. Tämä auttaa 020-your-eyes-only ratkaisemisessa.
d) Murtaudu 020-your-eyes-only. Ks. Karvinen 2024: Hack'n Fix
e) Korjaa 020-your-eyes-only haavoittuvuus. Osoita testillä, että ratkaisusi toimii.
g) Vapaaehtoinen. Johdantotehtävä, joka auttaa 010-staff-only ratkaisemisessa. Ratkaise Portswigger Academyn "Lab: SQL injection vulnerability in WHERE clause allowing retrieval of hidden data".
h) Vapaaehtoinen. Johdantotehtävä, joka auttaa 010-staff-only ratkaisemisessa. Ratkaise Portswigger Academyn "Lab: SQL injection vulnerability allowing login bypass"
